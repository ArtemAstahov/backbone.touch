/*!
 * backbone.touch.js v0.1
 * Copyright 2012, Raymond Julin (@nervetattoo)
 * backbone.touch.js may be freely distributed under the MIT license.
 */
(function(){var a=function(a,b){return!a||!a[b]?null:d.isFunction(a[b])?a[b]():a[b]},b=/^(\S+)\s*(.*)$/,c=this.Backbone,d=this._;d.extend(c.View.prototype,{_touching:!1,touchPrevents:!0,isTouch:"ontouchstart"in this.document,delegateEvents:function(c){if(!c&&!(c=a(this,"events")))return;this.undelegateEvents();var e=".delegateEvents"+this.cid;d(c).each(function(a,f){d.isFunction(a)||(a=this[c[f]]);if(!a)throw new Error('Method "'+c[f]+'" does not exist');var g=f.match(b),h=g[1],i=g[2];a=d.bind(a,this),this.isTouch&&h==="click"&&i!==""?(this.$el.on("touchstart"+e,i,this._touchHandler),this.$el.on("touchend"+e,i,{method:a},this._touchHandler)):(h+=e,i===""?this.$el.bind(h,a):this.$el.on(h,i,a))},this)},_touchHandler:function(a){var b=a.originalEvent.changedTouches[0];switch(a.type){case"touchstart":this._touching=[b.clientX,b.clientY];break;case"touchend":if(b.clientX===this._touching[0]&&b.clientY===this._touching[1]){this._touching=!1;if(this.touchPrevents){var c=a.currentTarget.tagName;if(c==="BUTTON"||c==="A")a.preventDefault(),a.stopPropagation()}a.data.method(a)}}}})}).call(this);